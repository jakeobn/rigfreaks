{% extends 'chillblast_layout.html' %}

{% block title %}{{ config.name }} - RigFreaks{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/chillblast-product-detail.css') }}">
{% endblock %}

{% block content %}
<!-- Product Hero Section -->
<section class="product-hero">
    <div class="container">
        <!-- Breadcrumb -->
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{{ url_for('index') }}">Home</a></li>
                <li class="breadcrumb-item"><a href="{{ url_for('builds.prebuilt_configs') }}">Prebuilt PCs</a></li>
                <li class="breadcrumb-item active" aria-current="page">{{ config.name }}</li>
            </ol>
        </nav>
        
        <div class="row">
            <div class="col-lg-8">
                <!-- Product Title -->
                <h1 class="product-title">{{ config.name }}</h1>
                <p class="product-subtitle">{{ config.description }}</p>
                
                <!-- Product Rating -->
                <div class="product-rating">
                    <div class="stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                    </div>
                    <span class="reviews-count">18 Reviews</span>
                </div>
                
                <!-- Product Gallery -->
                <div class="product-gallery">
                    <div class="gallery-main">
                        {% if config.category == 'gaming' %}
                        <img src="{{ url_for('static', filename='images/Untitled design (5).png') }}" alt="{{ config.name }}" id="main-image">
                        {% elif config.category == 'workstation' %}
                        <img src="{{ url_for('static', filename='images/Untitled design (10).png') }}" alt="{{ config.name }}" id="main-image">
                        {% else %}
                        <img src="{{ url_for('static', filename='images/Untitled design (2).png') }}" alt="{{ config.name }}" id="main-image">
                        {% endif %}
                    </div>
                    <div class="gallery-thumbs">
                        <div class="gallery-thumb active" data-src="{{ url_for('static', filename='images/Untitled design (5).png') }}">
                            <img src="{{ url_for('static', filename='images/Untitled design (5).png') }}" alt="{{ config.name }} - Front">
                        </div>
                        <div class="gallery-thumb" data-src="{{ url_for('static', filename='images/Untitled design (9).png') }}">
                            <img src="{{ url_for('static', filename='images/Untitled design (9).png') }}" alt="{{ config.name }} - Side">
                        </div>
                        <div class="gallery-thumb" data-src="{{ url_for('static', filename='images/Untitled design (11).png') }}">
                            <img src="{{ url_for('static', filename='images/Untitled design (11).png') }}" alt="{{ config.name }} - Back">
                        </div>
                        <div class="gallery-thumb" data-src="{{ url_for('static', filename='images/Untitled design (15).png') }}">
                            <img src="{{ url_for('static', filename='images/Untitled design (15).png') }}" alt="{{ config.name }} - Inside">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4">
                <!-- Product Price Section -->
                <div class="product-price-section">
                    <div class="product-price">£{{ config.price }}</div>
                    <div class="price-vat">Inc. VAT & Free Delivery</div>
                    
                    <div class="price-calculation">
                        <div class="price-row">
                            <span class="price-label">Subtotal:</span>
                            <span class="price-value">£{{ '%0.2f' | format(config.price * 0.8) }}</span>
                        </div>
                        <div class="price-row">
                            <span class="price-label">VAT (20%):</span>
                            <span class="price-value">£{{ '%0.2f' | format(config.price * 0.2) }}</span>
                        </div>
                        <div class="price-row">
                            <span class="price-label">Delivery:</span>
                            <span class="price-value">FREE</span>
                        </div>
                    </div>
                    
                    <div class="product-actions">
                        <a href="{{ url_for('cart.add_to_cart') }}?config_id={{ config.id }}" class="btn btn-primary btn-buy-now">
                            <i class="fas fa-shopping-cart me-2"></i>Add to Cart
                        </a>
                        <a href="{{ url_for('builds.load_prebuilt', config_id=config.id) }}" class="btn btn-outline-primary btn-configure">
                            <i class="fas fa-wrench me-2"></i>Customize This PC
                        </a>
                    </div>
                    
                    <div class="finance-options">
                        <h3 class="finance-title">Finance Available</h3>
                        <p class="finance-description">Spread the cost with monthly payments</p>
                        <div class="finance-price">From £{{ '%0.2f' | format(config.price / 24) }}/month</div>
                        <small>Subject to status. Terms and conditions apply.</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Product Tabs -->
<section class="product-tabs">
    <div class="container">
        <ul class="nav nav-tabs" id="productTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="specs-tab" data-bs-toggle="tab" data-bs-target="#specs" type="button" role="tab">
                    Specifications
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="description-tab" data-bs-toggle="tab" data-bs-target="#description" type="button" role="tab">
                    Description
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="performance-tab" data-bs-toggle="tab" data-bs-target="#performance" type="button" role="tab">
                    Performance
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews" type="button" role="tab">
                    Reviews
                </button>
            </li>
        </ul>
        
        <div class="tab-content" id="productTabContent">
            <!-- Specifications Tab -->
            <div class="tab-pane fade show active" id="specs" role="tabpanel" aria-labelledby="specs-tab">
                <div class="specs-section">
                    <h2 class="spec-title">System Specifications</h2>
                    
                    <div class="spec-list">
                        {% if config_details.cpu %}
                        <div class="spec-item">
                            <div class="spec-icon">
                                <i class="fas fa-microchip"></i>
                            </div>
                            <div class="spec-content">
                                <h3 class="spec-name">Processor (CPU)</h3>
                                <div class="spec-value">{{ config_details.cpu.name }}</div>
                            </div>
                        </div>
                        {% endif %}
                        
                        {% if config_details.motherboard %}
                        <div class="spec-item">
                            <div class="spec-icon">
                                <i class="fas fa-server"></i>
                            </div>
                            <div class="spec-content">
                                <h3 class="spec-name">Motherboard</h3>
                                <div class="spec-value">{{ config_details.motherboard.name }}</div>
                            </div>
                        </div>
                        {% endif %}
                        
                        {% if config_details.ram %}
                        <div class="spec-item">
                            <div class="spec-icon">
                                <i class="fas fa-memory"></i>
                            </div>
                            <div class="spec-content">
                                <h3 class="spec-name">Memory (RAM)</h3>
                                <div class="spec-value">{{ config_details.ram.name }}</div>
                            </div>
                        </div>
                        {% endif %}
                        
                        {% if config_details.gpu %}
                        <div class="spec-item">
                            <div class="spec-icon">
                                <i class="fas fa-tv"></i>
                            </div>
                            <div class="spec-content">
                                <h3 class="spec-name">Graphics Card</h3>
                                <div class="spec-value">{{ config_details.gpu.name }}</div>
                            </div>
                        </div>
                        {% endif %}
                        
                        {% if config_details.storage %}
                        <div class="spec-item">
                            <div class="spec-icon">
                                <i class="fas fa-hdd"></i>
                            </div>
                            <div class="spec-content">
                                <h3 class="spec-name">Storage</h3>
                                <div class="spec-value">{{ config_details.storage.name }}</div>
                            </div>
                        </div>
                        {% endif %}
                        
                        {% if config_details.power_supply %}
                        <div class="spec-item">
                            <div class="spec-icon">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="spec-content">
                                <h3 class="spec-name">Power Supply</h3>
                                <div class="spec-value">{{ config_details.power_supply.name }}</div>
                            </div>
                        </div>
                        {% endif %}
                        
                        {% if config_details.case %}
                        <div class="spec-item">
                            <div class="spec-icon">
                                <i class="fas fa-desktop"></i>
                            </div>
                            <div class="spec-content">
                                <h3 class="spec-name">Case</h3>
                                <div class="spec-value">{{ config_details.case.name }}</div>
                            </div>
                        </div>
                        {% endif %}
                        
                        {% if config_details.cooling %}
                        <div class="spec-item">
                            <div class="spec-icon">
                                <i class="fas fa-wind"></i>
                            </div>
                            <div class="spec-content">
                                <h3 class="spec-name">Cooling</h3>
                                <div class="spec-value">{{ config_details.cooling.name }}</div>
                            </div>
                        </div>
                        {% endif %}
                        
                        <div class="spec-item">
                            <div class="spec-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="spec-content">
                                <h3 class="spec-name">Warranty</h3>
                                <div class="spec-value">5 Year RigFreaks Warranty (2 Years Collect & Return, 3 Years Parts)</div>
                            </div>
                        </div>
                        
                        <div class="spec-item">
                            <div class="spec-icon">
                                <i class="fas fa-cogs"></i>
                            </div>
                            <div class="spec-content">
                                <h3 class="spec-name">Operating System</h3>
                                <div class="spec-value">Windows 11 Home 64-bit</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Description Tab -->
            <div class="tab-pane fade" id="description" role="tabpanel" aria-labelledby="description-tab">
                <div class="description-section">
                    <h2 class="spec-title">Product Description</h2>
                    
                    <div class="description-content">
                        {% if config.description %}
                        <p>{{ config.description }}</p>
                        {% endif %}
                        
                        <p>The {{ config.name }} is a premium custom-built desktop PC designed to deliver exceptional performance for {% if config.category == 'gaming' %}gaming enthusiasts{% elif config.category == 'workstation' %}content creators and professionals{% else %}all your computing needs{% endif %}.</p>
                        
                        {% if config.category == 'gaming' %}
                        <h3>Designed for Gaming Excellence</h3>
                        <p>Equipped with the powerful {{ config_details.cpu.name if config_details.cpu else 'high-performance CPU' }} and {{ config_details.gpu.name if config_details.gpu else 'dedicated graphics' }}, this gaming powerhouse delivers smooth gameplay and stunning visuals even in the most demanding titles. The {{ config_details.ram.name if config_details.ram else 'high-speed memory' }} ensures responsive multitasking, while the {{ config_details.storage.name if config_details.storage else 'fast storage solution' }} provides quick load times for your games and applications.</p>
                        
                        <h3>Key Gaming Features</h3>
                        <ul>
                            <li>High frame rates in the latest AAA games</li>
                            <li>Support for ray tracing and advanced graphics features</li>
                            <li>Optimized cooling for sustained gaming sessions</li>
                            <li>Customizable RGB lighting for a personalized setup</li>
                            <li>Expandable design for future upgrades</li>
                        </ul>
                        {% elif config.category == 'workstation' %}
                        <h3>Professional-Grade Performance</h3>
                        <p>The {{ config.name }} workstation features the {{ config_details.cpu.name if config_details.cpu else 'multi-core processor' }} and {{ config_details.gpu.name if config_details.gpu else 'professional graphics card' }} to accelerate your creative workflow. With {{ config_details.ram.name if config_details.ram else 'extensive memory' }} and {{ config_details.storage.name if config_details.storage else 'high-capacity storage' }}, this system excels at demanding tasks like 3D rendering, video editing, and complex simulations.</p>
                        
                        <h3>Workstation Advantages</h3>
                        <ul>
                            <li>Certified for professional applications</li>
                            <li>Exceptional multi-threaded performance</li>
                            <li>Reliable operation for mission-critical work</li>
                            <li>Optimized thermal design for sustained workloads</li>
                            <li>Enterprise-grade component selection</li>
                        </ul>
                        {% else %}
                        <h3>Versatile Performance</h3>
                        <p>Featuring the {{ config_details.cpu.name if config_details.cpu else 'powerful processor' }} and {{ config_details.gpu.name if config_details.gpu else 'dedicated graphics' }}, this system delivers excellent performance across a wide range of applications. With {{ config_details.ram.name if config_details.ram else 'ample memory' }} and {{ config_details.storage.name if config_details.storage else 'fast storage' }}, it's perfect for both productivity and entertainment.</p>
                        
                        <h3>System Highlights</h3>
                        <ul>
                            <li>Balanced performance for diverse computing needs</li>
                            <li>Efficient cooling and quiet operation</li>
                            <li>Premium component selection for reliability</li>
                            <li>Stylish design that fits any environment</li>
                            <li>Upgrade-friendly configuration</li>
                        </ul>
                        {% endif %}
                        
                        <h3>The RigFreaks Advantage</h3>
                        <p>Every {{ config.name }} is hand-built by our expert technicians and undergoes rigorous testing to ensure flawless performance. We use only the highest quality components from trusted manufacturers, and back every system with our comprehensive 5-year warranty for your peace of mind.</p>
                        
                        <p>Each system includes Windows 11 pre-installed and optimized, so you can start using your new PC right away. Our systems are also free from bloatware, giving you a clean and efficient computing experience from day one.</p>
                    </div>
                </div>
            </div>
            
            <!-- Performance Tab -->
            <div class="tab-pane fade" id="performance" role="tabpanel" aria-labelledby="performance-tab">
                <div class="performance-section">
                    <h2 class="spec-title">Performance Metrics</h2>
                    
                    {% if performance %}
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="performance-chart">
                                <h3 class="mb-4">Overall Performance</h3>
                                
                                <div class="performance-label">
                                    <span class="performance-name">Gaming</span>
                                    <span class="performance-value">{{ performance.gaming.overall }}/10</span>
                                </div>
                                <div class="performance-bar">
                                    <div class="performance-progress" style="width: {{ performance.gaming.overall * 10 }}%"></div>
                                </div>
                                
                                <div class="performance-label">
                                    <span class="performance-name">Content Creation</span>
                                    <span class="performance-value">{{ performance.content.overall }}/10</span>
                                </div>
                                <div class="performance-bar">
                                    <div class="performance-progress" style="width: {{ performance.content.overall * 10 }}%"></div>
                                </div>
                                
                                <div class="performance-label">
                                    <span class="performance-name">Productivity</span>
                                    <span class="performance-value">{{ performance.productivity.overall }}/10</span>
                                </div>
                                <div class="performance-bar">
                                    <div class="performance-progress" style="width: {{ performance.productivity.overall * 10 }}%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="performance-chart">
                                <h3 class="mb-4">Gaming Resolution Performance</h3>
                                
                                <div class="performance-label">
                                    <span class="performance-name">1080p Gaming</span>
                                    <span class="performance-value">{{ performance.gaming.res1080 }}/10</span>
                                </div>
                                <div class="performance-bar">
                                    <div class="performance-progress" style="width: {{ performance.gaming.res1080 * 10 }}%"></div>
                                </div>
                                
                                <div class="performance-label">
                                    <span class="performance-name">1440p Gaming</span>
                                    <span class="performance-value">{{ performance.gaming.res1440 }}/10</span>
                                </div>
                                <div class="performance-bar">
                                    <div class="performance-progress" style="width: {{ performance.gaming.res1440 * 10 }}%"></div>
                                </div>
                                
                                <div class="performance-label">
                                    <span class="performance-name">4K Gaming</span>
                                    <span class="performance-value">{{ performance.gaming.res4k }}/10</span>
                                </div>
                                <div class="performance-bar">
                                    <div class="performance-progress" style="width: {{ performance.gaming.res4k * 10 }}%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h3 class="mb-4">Estimated Game Performance</h3>
                    <div class="game-performance">
                        <div class="game-card">
                            <div class="game-icon">
                                <i class="fas fa-gamepad"></i>
                            </div>
                            <div class="game-name">Cyberpunk 2077</div>
                            <div class="game-fps">{{ performance.games.cyberpunk2077 }} FPS</div>
                            <div class="game-resolution">1080p Ultra Settings</div>
                        </div>
                        
                        <div class="game-card">
                            <div class="game-icon">
                                <i class="fas fa-gamepad"></i>
                            </div>
                            <div class="game-name">Fortnite</div>
                            <div class="game-fps">{{ performance.games.fortnite }} FPS</div>
                            <div class="game-resolution">1080p Epic Settings</div>
                        </div>
                        
                        <div class="game-card">
                            <div class="game-icon">
                                <i class="fas fa-gamepad"></i>
                            </div>
                            <div class="game-name">Call of Duty</div>
                            <div class="game-fps">{{ performance.games.cod }} FPS</div>
                            <div class="game-resolution">1080p Max Settings</div>
                        </div>
                    </div>
                    {% else %}
                    <div class="alert alert-info">
                        Performance benchmarks will be available soon for this system configuration.
                    </div>
                    {% endif %}
                </div>
            </div>
            
            <!-- Reviews Tab -->
            <div class="tab-pane fade" id="reviews" role="tabpanel" aria-labelledby="reviews-tab">
                <div class="reviews-section">
                    <div class="reviews-header row mb-4">
                        <div class="col-md-4">
                            <div class="reviews-average">
                                <div class="average-number">4.7</div>
                                <div class="average-stars">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star-half-alt"></i>
                                </div>
                                <div class="reviews-count-text">Based on 18 reviews</div>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <h2 class="spec-title">Customer Reviews</h2>
                            <p>Read what our customers are saying about the {{ config.name }}</p>
                        </div>
                    </div>
                    
                    <div class="review-list">
                        <div class="review-card">
                            <div class="review-header">
                                <div class="review-author">Michael T.</div>
                                <div class="review-date">3 days ago</div>
                            </div>
                            <div class="review-stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="review-content">
                                <p>Absolutely blown away by the performance of this PC. I've been playing all the latest games at max settings without any issues. The build quality is excellent, everything was securely packed, and it arrived sooner than expected. Would definitely recommend!</p>
                            </div>
                            <div class="review-helpful">
                                <span>Was this review helpful?</span>
                                <button class="helpful-button">
                                    <i class="fas fa-thumbs-up me-1"></i> Yes (7)
                                </button>
                                <button class="helpful-button">
                                    <i class="fas fa-thumbs-down me-1"></i> No (0)
                                </button>
                            </div>
                        </div>
                        
                        <div class="review-card">
                            <div class="review-header">
                                <div class="review-author">Sarah J.</div>
                                <div class="review-date">1 week ago</div>
                            </div>
                            <div class="review-stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="review-content">
                                <p>As a video editor, I needed a powerful system that could handle my workflow. This PC doesn't disappoint! Renders are much faster than my old machine, and it handles multiple applications smoothly. The customer service was excellent too - they answered all my questions before purchase. Very happy with my investment.</p>
                            </div>
                            <div class="review-helpful">
                                <span>Was this review helpful?</span>
                                <button class="helpful-button">
                                    <i class="fas fa-thumbs-up me-1"></i> Yes (4)
                                </button>
                                <button class="helpful-button">
                                    <i class="fas fa-thumbs-down me-1"></i> No (1)
                                </button>
                            </div>
                        </div>
                        
                        <div class="review-card">
                            <div class="review-header">
                                <div class="review-author">James W.</div>
                                <div class="review-date">2 weeks ago</div>
                            </div>
                            <div class="review-stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                            </div>
                            <div class="review-content">
                                <p>The PC arrived well-packaged and works great. Setup was straightforward, and I'm impressed with how quiet it runs even under load. The only reason I'm giving 4 stars instead of 5 is that one of the RGB lights wasn't working properly, but support was quick to help me fix the issue. Overall very happy with the purchase.</p>
                            </div>
                            <div class="review-helpful">
                                <span>Was this review helpful?</span>
                                <button class="helpful-button">
                                    <i class="fas fa-thumbs-up me-1"></i> Yes (3)
                                </button>
                                <button class="helpful-button">
                                    <i class="fas fa-thumbs-down me-1"></i> No (0)
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Related Products -->
<section class="related-products">
    <div class="container">
        <h2 class="related-title">You May Also Like</h2>
        
        <div class="row g-4">
            {% for related in related_products[:3] %}
            <div class="col-lg-4 col-md-6">
                <div class="related-card">
                    <div class="related-image">
                        {% if related.category == 'gaming' %}
                        <img src="{{ url_for('static', filename='images/Untitled design (5).png') }}" alt="{{ related.name }}">
                        {% elif related.category == 'workstation' %}
                        <img src="{{ url_for('static', filename='images/Untitled design (10).png') }}" alt="{{ related.name }}">
                        {% else %}
                        <img src="{{ url_for('static', filename='images/Untitled design (2).png') }}" alt="{{ related.name }}">
                        {% endif %}
                    </div>
                    <div class="related-content">
                        <h3 class="related-name">{{ related.name }}</h3>
                        <div class="related-price">£{{ related.price }}</div>
                        
                        <div class="related-actions">
                            <a href="{{ url_for('product_detail', config_id=related.id) }}" class="btn btn-primary btn-related-view">View PC</a>
                            <a href="{{ url_for('builds.load_prebuilt', config_id=related.id) }}" class="btn btn-outline-primary btn-related-buy">Buy</a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Gallery thumbnail click handling
        const thumbs = document.querySelectorAll('.gallery-thumb');
        const mainImage = document.getElementById('main-image');
        
        thumbs.forEach(thumb => {
            thumb.addEventListener('click', function() {
                // Update active class
                thumbs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                // Update main image
                const imageSrc = this.getAttribute('data-src');
                mainImage.src = imageSrc;
            });
        });
        
        // Helpful button functionality
        const helpfulButtons = document.querySelectorAll('.helpful-button');
        helpfulButtons.forEach(button => {
            button.addEventListener('click', function() {
                // In a real implementation, this would send an AJAX request
                // For now, just update the button text
                const text = this.textContent.trim();
                const isYes = text.includes('Yes');
                const count = parseInt(text.match(/\d+/)[0]) || 0;
                
                if (isYes) {
                    this.innerHTML = `<i class="fas fa-thumbs-up me-1"></i> Yes (${count + 1})`;
                } else {
                    this.innerHTML = `<i class="fas fa-thumbs-down me-1"></i> No (${count + 1})`;
                }
                
                // Disable both buttons after clicking
                const parent = this.parentElement;
                const buttons = parent.querySelectorAll('.helpful-button');
                buttons.forEach(btn => {
                    btn.disabled = true;
                    btn.style.opacity = '0.7';
                    btn.style.cursor = 'default';
                });
            });
        });
    });
</script>
{% endblock %}