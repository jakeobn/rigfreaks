{% extends 'layout.html' %}

{% block title %}{{ component.name }} - Details{% endblock %}

{% block content %}
<!-- Loading animation container -->
<div id="detail-loading-container" class="text-center p-5 mt-5 pt-5" style="display: none;">
    <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-3">Loading component details...</p>
</div>

<div class="container py-4 mt-5 pt-3" id="component-detail-content">
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ url_for('index') }}">Home</a></li>
            <li class="breadcrumb-item"><a href="https://778eba1a-61a7-4dc4-b064-12bf31a885df-00-267699hzag1om.worf.replit.dev/builder/step-by-step">PC Builder</a></li>
            <li class="breadcrumb-item"><a href="{{ url_for('select_component', category=category) }}">{{ category|capitalize }} Selection</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ component.name }}</li>
        </ol>
    </nav>

    <div class="row">
        <!-- Component Image/Icon Column -->
        <div class="col-lg-4 mb-4">
            <div class="card">
                <div class="card-body p-3 text-center">
                    <div class="component-image bg-dark p-5 mb-3 rounded">
                        {% if category == 'cooling' and component.id in ['deepcool-ak400-zero-dark', 'be-quiet-pure-rock-2-black'] %}
                            <img src="{{ url_for('static', filename='images/cooling/' + component.id + '.png') }}" alt="{{ component.name }}" class="img-fluid" style="max-height: 250px;">
                        {% elif category == 'cpu' %}
                            <i class="fas fa-microchip fa-8x text-secondary"></i>
                        {% elif category == 'motherboard' %}
                            <i class="fas fa-server fa-8x text-secondary"></i>
                        {% elif category == 'ram' %}
                            <i class="fas fa-memory fa-8x text-secondary"></i>
                        {% elif category == 'gpu' %}
                            <i class="fas fa-tv fa-8x text-secondary"></i>
                        {% elif category == 'storage' %}
                            <i class="fas fa-hdd fa-8x text-secondary"></i>
                        {% elif category == 'power_supply' %}
                            <i class="fas fa-plug fa-8x text-secondary"></i>
                        {% elif category == 'case' %}
                            <i class="fas fa-desktop fa-8x text-secondary"></i>
                        {% elif category == 'cooling' %}
                            <i class="fas fa-wind fa-8x text-secondary"></i>
                        {% endif %}
                    </div>
                    
                    <div class="price-box mb-3">
                        <span class="fs-4 fw-bold text-success">£{{ component.price }}</span>
                    </div>
                    
                    <form action="{{ url_for('add_component', category=category, component_id=component.id) }}" method="post" id="detail-select-form">
                        <button type="submit" class="btn {% if is_selected %}btn-danger{% else %}btn-primary{% endif %} btn-lg w-100 mb-2" id="detail-select-btn">
                            {% if is_selected %}
                                <i class="fas fa-times me-1"></i><span class="btn-text">Remove Component</span>
                            {% else %}
                                <i class="fas fa-plus me-1"></i><span class="btn-text">Add to Build</span>
                            {% endif %}
                        </button>
                    </form>
                    
                    <a href="{{ url_for('select_component', category=category) }}" class="btn btn-outline-secondary">
                        <i class="fas fa-arrow-left me-1"></i>Back to Selection
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Component Details Column -->
        <div class="col-lg-8">
            <div class="card mb-4">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h1 class="h3 mb-0">{{ component.name }}</h1>
                    <span class="badge bg-primary">{{ component.brand }}</span>
                </div>
                <div class="card-body">
                    <p class="lead">{{ component.description }}</p>
                    
                    <div class="highlight-features mb-4">
                        <h5 class="border-bottom pb-2 mb-3">Key Features</h5>
                        <div class="row g-3">
                            {% if category == 'cpu' %}
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-microchip"></i></div>
                                        <div class="feature-value fs-4">{{ component.cores }}</div>
                                        <div class="feature-label small">Cores</div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-stream"></i></div>
                                        <div class="feature-value fs-4">{{ component.threads }}</div>
                                        <div class="feature-label small">Threads</div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-tachometer-alt"></i></div>
                                        <div class="feature-value fs-4">{{ component.boost_clock }}</div>
                                        <div class="feature-label small">Max Speed</div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-fire"></i></div>
                                        <div class="feature-value fs-4">{{ component.tdp }}W</div>
                                        <div class="feature-label small">TDP</div>
                                    </div>
                                </div>
                            {% elif category == 'gpu' %}
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-memory"></i></div>
                                        <div class="feature-value fs-4">{{ component.memory }}GB</div>
                                        <div class="feature-label small">VRAM</div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-microchip"></i></div>
                                        <div class="feature-value fs-4">{{ component.memory_type }}</div>
                                        <div class="feature-label small">Memory Type</div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-tachometer-alt"></i></div>
                                        <div class="feature-value fs-4">{{ component.boost_clock }}</div>
                                        <div class="feature-label small">Boost Clock</div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-fire"></i></div>
                                        <div class="feature-value fs-4">{{ component.tdp }}W</div>
                                        <div class="feature-label small">TDP</div>
                                    </div>
                                </div>
                            {% elif category == 'ram' %}
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-database"></i></div>
                                        <div class="feature-value fs-4">{{ component.capacity }}GB</div>
                                        <div class="feature-label small">Capacity</div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-microchip"></i></div>
                                        <div class="feature-value fs-4">{{ component.type }}</div>
                                        <div class="feature-label small">Type</div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-tachometer-alt"></i></div>
                                        <div class="feature-value fs-4">{{ component.speed }}</div>
                                        <div class="feature-label small">Speed (MHz)</div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-layer-group"></i></div>
                                        <div class="feature-value fs-4">{{ component.modules }}</div>
                                        <div class="feature-label small">Modules</div>
                                    </div>
                                </div>
                            {% elif category == 'storage' %}
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-database"></i></div>
                                        <div class="feature-value fs-4">{{ component.capacity }}GB</div>
                                        <div class="feature-label small">Capacity</div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-microchip"></i></div>
                                        <div class="feature-value fs-4">{{ component.type }}</div>
                                        <div class="feature-label small">Type</div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-tachometer-alt"></i></div>
                                        <div class="feature-value fs-4">{{ component.read_speed }}</div>
                                        <div class="feature-label small">Read (MB/s)</div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-upload"></i></div>
                                        <div class="feature-value fs-4">{{ component.write_speed }}</div>
                                        <div class="feature-label small">Write (MB/s)</div>
                                    </div>
                                </div>
                            {% elif category == 'motherboard' %}
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-microchip"></i></div>
                                        <div class="feature-value fs-4">{{ component.socket }}</div>
                                        <div class="feature-label small">Socket</div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-chess-board"></i></div>
                                        <div class="feature-value fs-4">{{ component.chipset }}</div>
                                        <div class="feature-label small">Chipset</div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-memory"></i></div>
                                        <div class="feature-value fs-4">{{ component.ram_type }}</div>
                                        <div class="feature-label small">RAM Type</div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-layer-group"></i></div>
                                        <div class="feature-value fs-4">{{ component.ram_slots }}</div>
                                        <div class="feature-label small">RAM Slots</div>
                                    </div>
                                </div>
                            {% elif category == 'power_supply' %}
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-bolt"></i></div>
                                        <div class="feature-value fs-4">{{ component.wattage }}W</div>
                                        <div class="feature-label small">Power</div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-medal"></i></div>
                                        <div class="feature-value fs-4">{{ component.efficiency }}</div>
                                        <div class="feature-label small">Efficiency</div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-plug"></i></div>
                                        <div class="feature-value fs-4">{{ component.modular }}</div>
                                        <div class="feature-label small">Modularity</div>
                                    </div>
                                </div>
                            {% elif category == 'case' %}
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-desktop"></i></div>
                                        <div class="feature-value fs-4">{{ component.form_factor }}</div>
                                        <div class="feature-label small">Form Factor</div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-3">
                                    <div class="key-feature text-center p-3 bg-dark rounded">
                                        <div class="feature-icon mb-2"><i class="fas fa-weight"></i></div>
                                        <div class="feature-value fs-4">{{ component.weight }}kg</div>
                                        <div class="feature-label small">Weight</div>
                                    </div>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    
                    <!-- Detailed Specifications Table -->
                    <div class="detailed-specs">
                        <h5 class="border-bottom pb-2 mb-3">Full Specifications</h5>
                        <div class="table-responsive">
                            <table class="table table-striped table-hover">
                                <tbody>
                                    {% for key, value in component.items() %}
                                        {% if key not in ['id', 'name', 'description', 'price', 'image_url', 'specs'] %}
                                            <tr>
                                                <th style="width: 40%">{{ key|replace('_', ' ')|title }}</th>
                                                <td>{{ value }}</td>
                                            </tr>
                                        {% endif %}
                                    {% endfor %}
                                    
                                    <!-- Additional Specifications from specs object -->
                                    {% if component.specs %}
                                        <tr class="bg-dark">
                                            <th colspan="2" class="text-center">Additional Specifications</th>
                                        </tr>
                                        {% for key, value in component.specs.items() %}
                                            <tr>
                                                <th style="width: 40%">{{ key }}</th>
                                                <td>{{ value }}</td>
                                            </tr>
                                        {% endfor %}
                                    {% endif %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Component Performance Analysis -->
                    {% if category in ['cpu', 'gpu'] %}
                    <div class="performance-analysis mt-4">
                        <h5 class="border-bottom pb-2 mb-3">Performance Analysis</h5>
                        <div class="row">
                            <!-- Visualize relative performance metrics -->
                            <div class="col-md-6 mb-3">
                                <div class="card h-100">
                                    <div class="card-header">Performance Rating</div>
                                    <div class="card-body">
                                        <div class="performance-meter">
                                            {% if category == 'cpu' %}
                                                {% set score = (component.cores * component.threads / 2) %}
                                                {% if component.cores >= 16 %}
                                                    {% set rating = 'Excellent for workstation tasks, content creation, and gaming' %}
                                                    {% set perf_class = 'bg-success' %}
                                                    {% set perf_width = 95 %}
                                                {% elif component.cores >= 8 %}
                                                    {% set rating = 'Great for gaming and multitasking' %}
                                                    {% set perf_class = 'bg-info' %}
                                                    {% set perf_width = 75 %}
                                                {% elif component.cores >= 6 %}
                                                    {% set rating = 'Good for gaming and general use' %}
                                                    {% set perf_class = 'bg-primary' %}
                                                    {% set perf_width = 60 %}
                                                {% else %}
                                                    {% set rating = 'Suitable for office tasks and light gaming' %}
                                                    {% set perf_class = 'bg-secondary' %}
                                                    {% set perf_width = 40 %}
                                                {% endif %}
                                            {% elif category == 'gpu' %}
                                                {% if component.memory >= 20 %}
                                                    {% set rating = 'Enthusiast-grade for 4K/8K gaming and professional workloads' %}
                                                    {% set perf_class = 'bg-success' %}
                                                    {% set perf_width = 95 %}
                                                {% elif component.memory >= 12 %}
                                                    {% set rating = 'High-end performance for 4K gaming and content creation' %}
                                                    {% set perf_class = 'bg-info' %}
                                                    {% set perf_width = 75 %}
                                                {% elif component.memory >= 8 %}
                                                    {% set rating = 'Great for 1440p gaming and general creative work' %}
                                                    {% set perf_class = 'bg-primary' %}
                                                    {% set perf_width = 60 %}
                                                {% else %}
                                                    {% set rating = 'Suitable for 1080p gaming and everyday tasks' %}
                                                    {% set perf_class = 'bg-secondary' %}
                                                    {% set perf_width = 40 %}
                                                {% endif %}
                                            {% endif %}
                                            
                                            <div class="progress mb-3" style="height: 25px;">
                                                <div class="progress-bar {{ perf_class }}" role="progressbar" style="width: {{ perf_width }}%" 
                                                     aria-valuenow="{{ perf_width }}" aria-valuemin="0" aria-valuemax="100">
                                                    {{ perf_width }}%
                                                </div>
                                            </div>
                                            <p>{{ rating }}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <div class="card h-100">
                                    <div class="card-header">Recommended Use Cases</div>
                                    <div class="card-body">
                                        <ul class="list-group list-group-flush">
                                            {% if category == 'cpu' %}
                                                {% if component.cores >= 16 %}
                                                    <li class="list-group-item d-flex">
                                                        <i class="fas fa-check-circle text-success me-2"></i>
                                                        <span>Professional 3D Rendering</span>
                                                    </li>
                                                    <li class="list-group-item d-flex">
                                                        <i class="fas fa-check-circle text-success me-2"></i>
                                                        <span>Video Editing & Encoding</span>
                                                    </li>
                                                {% endif %}
                                                {% if component.cores >= 8 %}
                                                    <li class="list-group-item d-flex">
                                                        <i class="fas fa-check-circle text-success me-2"></i>
                                                        <span>Gaming & Streaming</span>
                                                    </li>
                                                {% endif %}
                                                <li class="list-group-item d-flex">
                                                    <i class="fas fa-check-circle text-success me-2"></i>
                                                    <span>General Computing Tasks</span>
                                                </li>
                                            {% elif category == 'gpu' %}
                                                {% if component.memory >= 20 %}
                                                    <li class="list-group-item d-flex">
                                                        <i class="fas fa-check-circle text-success me-2"></i>
                                                        <span>AI & Machine Learning</span>
                                                    </li>
                                                    <li class="list-group-item d-flex">
                                                        <i class="fas fa-check-circle text-success me-2"></i>
                                                        <span>8K Gaming</span>
                                                    </li>
                                                {% endif %}
                                                {% if component.memory >= 12 %}
                                                    <li class="list-group-item d-flex">
                                                        <i class="fas fa-check-circle text-success me-2"></i>
                                                        <span>4K Gaming</span>
                                                    </li>
                                                    <li class="list-group-item d-flex">
                                                        <i class="fas fa-check-circle text-success me-2"></i>
                                                        <span>3D Rendering & Animation</span>
                                                    </li>
                                                {% endif %}
                                                {% if component.memory >= 8 %}
                                                    <li class="list-group-item d-flex">
                                                        <i class="fas fa-check-circle text-success me-2"></i>
                                                        <span>1440p Gaming</span>
                                                    </li>
                                                    <li class="list-group-item d-flex">
                                                        <i class="fas fa-check-circle text-success me-2"></i>
                                                        <span>Video Editing</span>
                                                    </li>
                                                {% endif %}
                                                <li class="list-group-item d-flex">
                                                    <i class="fas fa-check-circle text-success me-2"></i>
                                                    <span>1080p Gaming</span>
                                                </li>
                                            {% endif %}
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Benchmark Results -->
                        <h5 class="border-bottom pb-2 mb-3 mt-4">Benchmark Results</h5>
                        <div class="row">
                            <div class="col-md-6 mb-4">
                                <div class="card">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <span>{{ 'Single-Core Performance' if category == 'cpu' else 'Gaming Performance (1080p)' }}</span>
                                        <span class="badge bg-primary">Relative Score</span>
                                    </div>
                                    <div class="card-body">
                                        {% if category == 'cpu' %}
                                            {% set benchmark_score = (component.boost_clock|string|replace(' GHz', '')|float * 100)|int %}
                                            {% set benchmark_max = 550 %}
                                            {% set percentage = ((benchmark_score / benchmark_max) * 100)|round|int %}
                                        {% else %}
                                            {% set memory_score = component.memory * 20 %}
                                            {% set clock_score = component.boost_clock|string|replace(' GHz', '')|float * 100 %}
                                            {% set benchmark_score = (memory_score + clock_score)|int %}
                                            {% set benchmark_max = 600 %}
                                            {% set percentage = ((benchmark_score / benchmark_max) * 100)|round|int %}
                                        {% endif %}
                                        
                                        <div class="progress mb-3" style="height: 30px;">
                                            <div class="progress-bar bg-info" role="progressbar" style="width: {{ percentage }}%" 
                                                 aria-valuenow="{{ percentage }}" aria-valuemin="0" aria-valuemax="100">
                                                {{ benchmark_score }} points
                                            </div>
                                        </div>
                                        
                                        <div class="d-flex justify-content-between small text-muted">
                                            <div>Entry Level</div>
                                            <div>Mid-Range</div>
                                            <div>High-End</div>
                                        </div>
                                        
                                        <div class="benchmark-details mt-4">
                                            <div class="row">
                                                <div class="col-6">
                                                    <div class="border-bottom mb-2 pb-1">
                                                        <strong>{{ 'Geekbench 5' if category == 'cpu' else '3DMark Time Spy' }}</strong>
                                                    </div>
                                                    <div class="d-flex justify-content-between">
                                                        <span>Score:</span>
                                                        <span class="fw-bold">{{ benchmark_score }}</span>
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="border-bottom mb-2 pb-1">
                                                        <strong>{{ 'Cinebench R23' if category == 'cpu' else 'Unigine Heaven' }}</strong>
                                                    </div>
                                                    <div class="d-flex justify-content-between">
                                                        <span>Score:</span>
                                                        <span class="fw-bold">{{ (benchmark_score * 1.2)|int }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6 mb-4">
                                <div class="card">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <span>{{ 'Multi-Core Performance' if category == 'cpu' else 'Gaming Performance (4K)' }}</span>
                                        <span class="badge bg-primary">Relative Score</span>
                                    </div>
                                    <div class="card-body">
                                        {% if category == 'cpu' %}
                                            {% set multi_score = (component.cores * component.threads * component.boost_clock|string|replace(' GHz', '')|float * 10)|int %}
                                            {% set multi_max = 25000 %}
                                            {% set multi_percentage = ((multi_score / multi_max) * 100)|round|int %}
                                        {% else %}
                                            {% set memory_score = component.memory * 40 %}
                                            {% set clock_score = component.boost_clock|string|replace(' GHz', '')|float * 150 %}
                                            {% set multi_score = (memory_score + clock_score)|int %}
                                            {% set multi_max = 1500 %}
                                            {% set multi_percentage = ((multi_score / multi_max) * 100)|round|int %}
                                        {% endif %}
                                        
                                        <div class="progress mb-3" style="height: 30px;">
                                            <div class="progress-bar bg-info" role="progressbar" style="width: {{ multi_percentage }}%" 
                                                 aria-valuenow="{{ multi_percentage }}" aria-valuemin="0" aria-valuemax="100">
                                                {{ multi_score }} points
                                            </div>
                                        </div>
                                        
                                        <div class="d-flex justify-content-between small text-muted">
                                            <div>Entry Level</div>
                                            <div>Mid-Range</div>
                                            <div>High-End</div>
                                        </div>
                                        
                                        <div class="benchmark-details mt-4">
                                            <div class="row">
                                                <div class="col-6">
                                                    <div class="border-bottom mb-2 pb-1">
                                                        <strong>{{ 'Geekbench 5 Multi' if category == 'cpu' else '3DMark Fire Strike Ultra' }}</strong>
                                                    </div>
                                                    <div class="d-flex justify-content-between">
                                                        <span>Score:</span>
                                                        <span class="fw-bold">{{ multi_score }}</span>
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="border-bottom mb-2 pb-1">
                                                        <strong>{{ 'Cinebench R23 Multi' if category == 'cpu' else 'VRMark' }}</strong>
                                                    </div>
                                                    <div class="d-flex justify-content-between">
                                                        <span>Score:</span>
                                                        <span class="fw-bold">{{ (multi_score * 0.8)|int }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- In-game FPS Estimates for GPUs -->
                            {% if category == 'gpu' %}
                            <div class="col-12 mb-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h6 class="mb-0">Estimated Gaming Performance (FPS)</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr>
                                                        <th>Game</th>
                                                        <th class="text-center">1080p</th>
                                                        <th class="text-center">1440p</th>
                                                        <th class="text-center">4K</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {% set game_titles = ['Cyberpunk 2077', 'Fortnite', 'Call of Duty: Warzone', 'Red Dead Redemption 2', 'Microsoft Flight Simulator'] %}
                                                    
                                                    {% for game in game_titles %}
                                                        <tr>
                                                            <td>{{ game }}</td>
                                                            {% if component.memory >= 20 %}
                                                                <td class="text-center">{{ (160 + loop.index * 5)|int }}</td>
                                                                <td class="text-center">{{ (120 + loop.index * 3)|int }}</td>
                                                                <td class="text-center">{{ (70 + loop.index * 2)|int }}</td>
                                                            {% elif component.memory >= 12 %}
                                                                <td class="text-center">{{ (130 + loop.index * 4)|int }}</td>
                                                                <td class="text-center">{{ (90 + loop.index * 2)|int }}</td>
                                                                <td class="text-center">{{ (45 + loop.index)|int }}</td>
                                                            {% elif component.memory >= 8 %}
                                                                <td class="text-center">{{ (100 + loop.index * 3)|int }}</td>
                                                                <td class="text-center">{{ (65 + loop.index)|int }}</td>
                                                                <td class="text-center">{{ (30 + loop.index / 2)|int }}</td>
                                                            {% else %}
                                                                <td class="text-center">{{ (70 + loop.index * 2)|int }}</td>
                                                                <td class="text-center">{{ (40 + loop.index)|int }}</td>
                                                                <td class="text-center">{{ (20 + loop.index / 3)|int }}</td>
                                                            {% endif %}
                                                        </tr>
                                                    {% endfor %}
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="small text-muted mt-2">
                                            <i class="fas fa-info-circle me-1"></i>
                                            Estimated FPS values with High/Ultra settings. Actual performance may vary depending on system configuration.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                            
                            <!-- Thermal Performance for CPUs -->
                            {% if category == 'cpu' %}
                            <div class="col-12 mb-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h6 class="mb-0">Thermal Performance</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <h6 class="mb-3">Temperature Estimates</h6>
                                                <table class="table table-sm table-bordered">
                                                    <thead class="bg-dark">
                                                        <tr>
                                                            <th>Cooling Solution</th>
                                                            <th class="text-center">Idle</th>
                                                            <th class="text-center">Load</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td>Stock Cooler</td>
                                                            <td class="text-center">{{ (30 + (component.tdp / 20))|int }}°C</td>
                                                            <td class="text-center">{{ (65 + (component.tdp / 10))|int }}°C</td>
                                                        </tr>
                                                        <tr>
                                                            <td>Mid-Range Air Cooler</td>
                                                            <td class="text-center">{{ (28 + (component.tdp / 25))|int }}°C</td>
                                                            <td class="text-center">{{ (55 + (component.tdp / 15))|int }}°C</td>
                                                        </tr>
                                                        <tr>
                                                            <td>High-End Air / AIO</td>
                                                            <td class="text-center">{{ (26 + (component.tdp / 30))|int }}°C</td>
                                                            <td class="text-center">{{ (45 + (component.tdp / 20))|int }}°C</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class="col-md-6">
                                                <h6 class="mb-3">Power Consumption</h6>
                                                <div class="mb-4">
                                                    <div class="d-flex justify-content-between mb-1">
                                                        <span>Idle</span>
                                                        <span>{{ (component.tdp / 10)|int }} Watts</span>
                                                    </div>
                                                    <div class="progress" style="height: 15px;">
                                                        <div class="progress-bar bg-success" style="width: {{ ((component.tdp / 10) / component.tdp * 100)|int }}%"></div>
                                                    </div>
                                                </div>
                                                <div class="mb-4">
                                                    <div class="d-flex justify-content-between mb-1">
                                                        <span>Average Load</span>
                                                        <span>{{ (component.tdp * 0.7)|int }} Watts</span>
                                                    </div>
                                                    <div class="progress" style="height: 15px;">
                                                        <div class="progress-bar bg-warning" style="width: {{ ((component.tdp * 0.7) / component.tdp * 100)|int }}%"></div>
                                                    </div>
                                                </div>
                                                <div>
                                                    <div class="d-flex justify-content-between mb-1">
                                                        <span>Maximum Load</span>
                                                        <span>{{ component.tdp }} Watts</span>
                                                    </div>
                                                    <div class="progress" style="height: 15px;">
                                                        <div class="progress-bar bg-danger" style="width: 100%"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    {% endif %}
                    
                    <!-- Compatibility Information -->
                    <div class="compatibility-info mt-4">
                        <h5 class="border-bottom pb-2 mb-3">Compatibility Information</h5>
                        <div class="card">
                            <div class="card-body">
                                {% if category == 'cpu' %}
                                    <p><strong>Socket Compatibility:</strong> This CPU requires a {{ component.socket }} socket motherboard.</p>
                                    <p><strong>Cooling Requirements:</strong> For optimal performance, we recommend a {{ 'high-end' if component.tdp > 150 else 'moderate' if component.tdp > 95 else 'standard' }} CPU cooler.</p>
                                    
                                    <div class="row mt-4">
                                        <div class="col-md-6 mb-3">
                                            <h6>Motherboard Compatibility</h6>
                                            <div class="list-group">
                                                <div class="list-group-item list-group-item-success">
                                                    <i class="fas fa-check-circle me-2"></i>{{ component.socket }} Socket Motherboards
                                                </div>
                                                <div class="list-group-item list-group-item-danger">
                                                    <i class="fas fa-times-circle me-2"></i>Other Socket Motherboards
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <h6>RAM Considerations</h6>
                                            <div class="list-group">
                                                {% if 'Intel' in component.brand %}
                                                    <div class="list-group-item list-group-item-success">
                                                        <i class="fas fa-check-circle me-2"></i>DDR4/DDR5 (Depending on Motherboard)
                                                    </div>
                                                {% else %}
                                                    <div class="list-group-item list-group-item-success">
                                                        <i class="fas fa-check-circle me-2"></i>DDR5 (for AM5 socket)
                                                    </div>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                    
                                {% elif category == 'motherboard' %}
                                    <p><strong>CPU Compatibility:</strong> This motherboard supports {{ component.socket }} socket processors.</p>
                                    <p><strong>Memory Compatibility:</strong> Compatible with {{ component.ram_type }} memory up to {{ component.max_ram }}GB total.</p>
                                    <p><strong>Form Factor:</strong> Requires a case that supports {{ component.form_factor }} form factor.</p>
                                    
                                    <div class="row mt-4">
                                        <div class="col-md-6 mb-3">
                                            <h6>CPU Compatibility</h6>
                                            <div class="list-group">
                                                <div class="list-group-item list-group-item-success">
                                                    <i class="fas fa-check-circle me-2"></i>{{ component.socket }} Socket CPUs
                                                </div>
                                                <div class="list-group-item list-group-item-danger">
                                                    <i class="fas fa-times-circle me-2"></i>Other Socket CPUs
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <h6>Case Compatibility</h6>
                                            <div class="list-group">
                                                <div class="list-group-item list-group-item-success">
                                                    <i class="fas fa-check-circle me-2"></i>{{ component.form_factor }} Cases or Larger
                                                </div>
                                                <div class="list-group-item list-group-item-danger">
                                                    <i class="fas fa-times-circle me-2"></i>Smaller Form Factor Cases
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                {% elif category == 'ram' %}
                                    <p><strong>Motherboard Compatibility:</strong> This memory is compatible with motherboards supporting {{ component.type }}.</p>
                                    
                                    <div class="row mt-4">
                                        <div class="col-md-6 mb-3">
                                            <h6>Motherboard Compatibility</h6>
                                            <div class="list-group">
                                                <div class="list-group-item list-group-item-success">
                                                    <i class="fas fa-check-circle me-2"></i>{{ component.type }} Compatible Motherboards
                                                </div>
                                                <div class="list-group-item list-group-item-danger">
                                                    <i class="fas fa-times-circle me-2"></i>{{ 'DDR4' if component.type == 'DDR5' else 'DDR5' }} Motherboards
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <h6>CPU Considerations</h6>
                                            <div class="list-group">
                                                {% if component.type == 'DDR5' %}
                                                    <div class="list-group-item list-group-item-success">
                                                        <i class="fas fa-check-circle me-2"></i>Intel 12th Gen+ or AMD Ryzen 7000+
                                                    </div>
                                                {% else %}
                                                    <div class="list-group-item list-group-item-success">
                                                        <i class="fas fa-check-circle me-2"></i>Most Current & Previous Gen CPUs
                                                    </div>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                    
                                {% elif category == 'gpu' %}
                                    <p><strong>Power Requirements:</strong> Requires a power supply with {{ component.power_connectors }} power connectors and sufficient wattage (minimum {{ component.tdp + 150 }}W recommended).</p>
                                    <p><strong>Size Considerations:</strong> Graphics card length is {{ component.length }}mm, ensure your case has sufficient clearance.</p>
                                    
                                    <div class="row mt-4">
                                        <div class="col-md-6 mb-3">
                                            <h6>Power Supply Requirements</h6>
                                            <div class="list-group">
                                                <div class="list-group-item list-group-item-success">
                                                    <i class="fas fa-check-circle me-2"></i>{{ component.tdp + 150 }}W or higher PSU
                                                </div>
                                                <div class="list-group-item list-group-item-danger">
                                                    <i class="fas fa-times-circle me-2"></i>Less than {{ component.tdp + 150 }}W PSU
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <h6>Case Compatibility</h6>
                                            <div class="list-group">
                                                <div class="list-group-item list-group-item-success">
                                                    <i class="fas fa-check-circle me-2"></i>Cases with {{ component.length }}mm+ GPU clearance
                                                </div>
                                                <div class="list-group-item list-group-item-danger">
                                                    <i class="fas fa-times-circle me-2"></i>Smaller cases with limited clearance
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                {% elif category == 'storage' %}
                                    <p><strong>Interface Compatibility:</strong> Requires a motherboard with {{ component.interface }} connectivity.</p>
                                    
                                    <div class="row mt-4">
                                        <div class="col-md-6 mb-3">
                                            <h6>Motherboard Compatibility</h6>
                                            <div class="list-group">
                                                <div class="list-group-item list-group-item-success">
                                                    <i class="fas fa-check-circle me-2"></i>Motherboards with {{ component.interface }} ports
                                                </div>
                                                {% if 'PCIe' in component.interface %}
                                                    <div class="list-group-item list-group-item-warning">
                                                        <i class="fas fa-exclamation-circle me-2"></i>Older PCIe versions (may run at reduced speeds)
                                                    </div>
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <h6>Form Factor Considerations</h6>
                                            <div class="list-group">
                                                <div class="list-group-item list-group-item-success">
                                                    <i class="fas fa-check-circle me-2"></i>{{ component.form_factor }} slots
                                                </div>
                                                {% if component.form_factor == 'M.2 2280' %}
                                                    <div class="list-group-item list-group-item-info">
                                                        <i class="fas fa-info-circle me-2"></i>Most modern motherboards support this size
                                                    </div>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                    
                                {% elif category == 'power_supply' %}
                                    <p><strong>Connectors Available:</strong> {{ component.specs.get('Connectors', 'Standard connectors') }}</p>
                                    
                                    <div class="row mt-4">
                                        <div class="col-md-6 mb-3">
                                            <h6>System Power Requirements</h6>
                                            <div class="list-group">
                                                <div class="list-group-item list-group-item-success">
                                                    <i class="fas fa-check-circle me-2"></i>Systems requiring up to {{ component.wattage * 0.8 }}W
                                                </div>
                                                <div class="list-group-item list-group-item-danger">
                                                    <i class="fas fa-times-circle me-2"></i>Systems requiring more than {{ component.wattage * 0.8 }}W
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <h6>Case Compatibility</h6>
                                            <div class="list-group">
                                                <div class="list-group-item list-group-item-info">
                                                    <i class="fas fa-info-circle me-2"></i>{{ 'Standard ATX PSU Mount' if component.wattage < 1000 else 'Check case for high-wattage PSU clearance' }}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                {% elif category == 'case' %}
                                    <p><strong>Motherboard Support:</strong> {{ component.specs.get('Motherboard Support', component.form_factor) }}</p>
                                    <p><strong>Maximum GPU Length:</strong> {{ component.specs.get('Maximum GPU Length', 'Standard length') }}</p>
                                    <p><strong>Maximum CPU Cooler Height:</strong> {{ component.specs.get('Maximum CPU Cooler Height', 'Standard height') }}</p>
                                    
                                    <div class="row mt-4">
                                        <div class="col-md-6 mb-3">
                                            <h6>Motherboard Compatibility</h6>
                                            <div class="list-group">
                                                {% for supported in component.specs.get('Motherboard Support', component.form_factor).split(', ') %}
                                                    <div class="list-group-item list-group-item-success">
                                                        <i class="fas fa-check-circle me-2"></i>{{ supported }}
                                                    </div>
                                                {% endfor %}
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <h6>Component Clearance</h6>
                                            <div class="list-group">
                                                <div class="list-group-item list-group-item-info">
                                                    <i class="fas fa-info-circle me-2"></i>GPU Length: Up to {{ component.specs.get('Maximum GPU Length', '300mm') }}
                                                </div>
                                                <div class="list-group-item list-group-item-info">
                                                    <i class="fas fa-info-circle me-2"></i>CPU Cooler: Up to {{ component.specs.get('Maximum CPU Cooler Height', '160mm') }}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    

                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Show loading animation initially
        const loadingContainer = document.getElementById('detail-loading-container');
        const contentContainer = document.getElementById('component-detail-content');
        
        // Initially hide component details
        contentContainer.style.opacity = '0';
        contentContainer.style.visibility = 'hidden';
        
        // Show loading animation
        loadingContainer.style.display = 'block';
        
        // Simulate loading delay
        setTimeout(() => {
            // Hide loading animation
            loadingContainer.style.display = 'none';
            
            // Show component details with fade-in effect
            contentContainer.style.transition = 'opacity 0.5s ease';
            contentContainer.style.visibility = 'visible';
            contentContainer.style.opacity = '1';
            
            // Animate the feature cards with staggered effect
            const featureCards = document.querySelectorAll('.key-feature');
            featureCards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                card.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
                
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, 100 + (index * 70)); // Staggered delay
            });
            
            // Animate spec items with fade-in effect
            const specItems = document.querySelectorAll('.spec-item');
            specItems.forEach((item, index) => {
                item.style.opacity = '0';
                item.style.transition = 'opacity 0.3s ease';
                
                setTimeout(() => {
                    item.style.opacity = '1';
                }, 500 + (index * 30)); // Start after feature cards with staggered delay
            });
        }, 1000); // 1 second loading animation
        
        // Handle select/add/remove button loading animation
        const selectForm = document.getElementById('detail-select-form');
        if (selectForm) {
            selectForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const btn = document.getElementById('detail-select-btn');
                const btnText = btn.querySelector('.btn-text');
                const originalText = btnText.textContent;
                const originalIcon = btn.querySelector('i').className;
                
                // Determine if this is an add or remove action
                const isRemoveAction = btn.classList.contains('btn-danger');
                
                // Add loading state
                btn.classList.add('btn-loading');
                btn.disabled = true;
                btnText.textContent = isRemoveAction ? 'Removing...' : 'Adding...';
                btn.querySelector('i').className = 'fas fa-spinner fa-spin';
                
                // Submit the form after a short delay
                setTimeout(() => {
                    this.submit();
                }, 800);
            });
        }
    });
</script>
{% endblock %}