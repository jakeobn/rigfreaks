{% extends 'chillblast_layout.html' %}

{% block title %}Prebuilt Gaming PCs & Workstations - RigFreaks{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/chillblast-prebuilt.css') }}">
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="prebuilt-hero">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h1>Premium Prebuilt Gaming PCs & Workstations</h1>
                <p>Explore our range of expertly crafted, high-performance computers designed for gaming, content creation, and professional work. Each system is assembled with premium components and backed by our 5-year warranty.</p>
                <a href="#gaming-pcs" class="btn btn-primary btn-lg mb-4">
                    <i class="fas fa-gamepad me-2"></i>Explore Gaming PCs
                </a>
            </div>
            <div class="col-lg-6 text-center">
                <img src="{{ url_for('static', filename='images/Untitled design (5).png') }}" alt="Premium Prebuilt PCs" class="prebuilt-hero-image">
            </div>
        </div>
    </div>
</section>

<!-- Filter Section -->
<section class="filter-section">
    <div class="container">
        <div class="filter-container">
            <div class="filter-group">
                <p class="filter-label">Filter By:</p>
                <select class="filter-select" id="category-filter">
                    <option value="all">All Categories</option>
                    <option value="gaming">Gaming PCs</option>
                    <option value="workstation">Workstations</option>
                    <option value="budget">Budget PCs</option>
                </select>
                <select class="filter-select" id="price-filter">
                    <option value="all">All Prices</option>
                    <option value="under-1000">Under £1,000</option>
                    <option value="1000-2000">£1,000 - £2,000</option>
                    <option value="over-2000">Over £2,000</option>
                </select>
            </div>
            <div class="filter-group">
                <p class="filter-label">Sort By:</p>
                <select class="filter-select" id="sort-filter">
                    <option value="price-low">Price (Low to High)</option>
                    <option value="price-high">Price (High to Low)</option>
                    <option value="newest">Newest</option>
                    <option value="popularity">Most Popular</option>
                </select>
            </div>
        </div>
    </div>
</section>

<!-- Product Grid -->
<section class="prebuilt-grid">
    <div class="container">
        <!-- Gaming PCs -->
        <div class="prebuilt-category" id="gaming-pcs">
            <h2 class="category-title">Gaming PCs</h2>
            <p class="category-description">Experience exceptional gaming performance with our range of custom-built gaming PCs. From budget-friendly options to high-end powerhouses, we have the perfect system to elevate your gaming experience.</p>
            
            <div class="row g-4">
                {% for config in configs %}
                {% if config.category == 'gaming' %}
                <div class="col-lg-4 col-md-6 product-item" data-category="{{ config.category }}" data-price="{{ config.price }}">
                    <div class="product-card">
                        <div class="product-image">
                            {% if loop.first %}
                            <div class="product-badge best-seller">Best Seller</div>
                            {% elif loop.index == 2 %}
                            <div class="product-badge new">New</div>
                            {% elif config.price > 2000 %}
                            <div class="product-badge">Premium</div>
                            {% endif %}
                            <img src="{{ url_for('static', filename='images/Untitled design (5).png') }}" alt="{{ config.name }}">
                        </div>
                        <div class="product-content">
                            <h3 class="product-title">{{ config.name }}</h3>
                            <div class="product-price">£{{ '%0.2f' | format(config.price) }}</div>
                            
                            <div class="monthly-payment">
                                From <span class="payment-amount">£{{ '%0.2f' | format(config.price / 24) }}/month</span>
                            </div>
                            
                            <div class="product-specs">
                                {% if config.cpu_id %}
                                <div class="spec-item">
                                    <div class="spec-icon">
                                        <i class="fas fa-microchip"></i>
                                    </div>
                                    <div class="spec-content">
                                        <div class="spec-title">CPU</div>
                                        <div class="spec-value">{{ config.cpu_id }}</div>
                                    </div>
                                </div>
                                {% endif %}
                                
                                {% if config.gpu_id %}
                                <div class="spec-item">
                                    <div class="spec-icon">
                                        <i class="fas fa-tv"></i>
                                    </div>
                                    <div class="spec-content">
                                        <div class="spec-title">Graphics Card</div>
                                        <div class="spec-value">{{ config.gpu_id }}</div>
                                    </div>
                                </div>
                                {% endif %}
                                
                                {% if config.ram_id %}
                                <div class="spec-item">
                                    <div class="spec-icon">
                                        <i class="fas fa-memory"></i>
                                    </div>
                                    <div class="spec-content">
                                        <div class="spec-title">Memory</div>
                                        <div class="spec-value">{{ config.ram_id }}</div>
                                    </div>
                                </div>
                                {% endif %}
                                
                                {% if config.storage_id %}
                                <div class="spec-item">
                                    <div class="spec-icon">
                                        <i class="fas fa-hdd"></i>
                                    </div>
                                    <div class="spec-content">
                                        <div class="spec-title">Storage</div>
                                        <div class="spec-value">{{ config.storage_id }}</div>
                                    </div>
                                </div>
                                {% endif %}
                            </div>
                            
                            <div class="product-actions">
                                <a href="{{ url_for('product_detail', config_id=config.id) }}" class="btn btn-primary btn-view">View PC</a>
                                <a href="{{ url_for('builds.load_prebuilt', config_id=config.id) }}" class="btn btn-outline-primary btn-buy">Buy</a>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </div>
        
        <!-- Workstations -->
        <div class="prebuilt-category" id="workstations">
            <h2 class="category-title">Professional Workstations</h2>
            <p class="category-description">Designed for content creators, engineers, and professionals who demand exceptional performance. Our workstations offer power, reliability, and precision for the most demanding applications.</p>
            
            <div class="row g-4">
                {% for config in configs %}
                {% if config.category == 'workstation' %}
                <div class="col-lg-4 col-md-6 product-item" data-category="{{ config.category }}" data-price="{{ config.price }}">
                    <div class="product-card">
                        <div class="product-image">
                            {% if loop.first and config.category == 'workstation' %}
                            <div class="product-badge best-seller">Best Seller</div>
                            {% elif config.price > 2500 %}
                            <div class="product-badge">Premium</div>
                            {% endif %}
                            <img src="{{ url_for('static', filename='images/Untitled design (10).png') }}" alt="{{ config.name }}">
                        </div>
                        <div class="product-content">
                            <h3 class="product-title">{{ config.name }}</h3>
                            <div class="product-price">£{{ '%0.2f' | format(config.price) }}</div>
                            
                            <div class="monthly-payment">
                                From <span class="payment-amount">£{{ '%0.2f' | format(config.price / 24) }}/month</span>
                            </div>
                            
                            <div class="product-specs">
                                {% if config.cpu_id %}
                                <div class="spec-item">
                                    <div class="spec-icon">
                                        <i class="fas fa-microchip"></i>
                                    </div>
                                    <div class="spec-content">
                                        <div class="spec-title">CPU</div>
                                        <div class="spec-value">{{ config.cpu_id }}</div>
                                    </div>
                                </div>
                                {% endif %}
                                
                                {% if config.gpu_id %}
                                <div class="spec-item">
                                    <div class="spec-icon">
                                        <i class="fas fa-tv"></i>
                                    </div>
                                    <div class="spec-content">
                                        <div class="spec-title">Graphics Card</div>
                                        <div class="spec-value">{{ config.gpu_id }}</div>
                                    </div>
                                </div>
                                {% endif %}
                                
                                {% if config.ram_id %}
                                <div class="spec-item">
                                    <div class="spec-icon">
                                        <i class="fas fa-memory"></i>
                                    </div>
                                    <div class="spec-content">
                                        <div class="spec-title">Memory</div>
                                        <div class="spec-value">{{ config.ram_id }}</div>
                                    </div>
                                </div>
                                {% endif %}
                                
                                {% if config.storage_id %}
                                <div class="spec-item">
                                    <div class="spec-icon">
                                        <i class="fas fa-hdd"></i>
                                    </div>
                                    <div class="spec-content">
                                        <div class="spec-title">Storage</div>
                                        <div class="spec-value">{{ config.storage_id }}</div>
                                    </div>
                                </div>
                                {% endif %}
                            </div>
                            
                            <div class="product-actions">
                                <a href="{{ url_for('product_detail', config_id=config.id) }}" class="btn btn-primary btn-view">View PC</a>
                                <a href="{{ url_for('builds.load_prebuilt', config_id=config.id) }}" class="btn btn-outline-primary btn-buy">Buy</a>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </div>
        
        <!-- Budget PCs -->
        <div class="prebuilt-category" id="budget-pcs">
            <h2 class="category-title">Budget PCs</h2>
            <p class="category-description">Quality computing doesn't have to break the bank. Our budget PC range offers excellent performance at affordable price points, perfect for everyday use and casual gaming.</p>
            
            <div class="row g-4">
                {% for config in configs %}
                {% if config.category == 'budget' %}
                <div class="col-lg-4 col-md-6 product-item" data-category="{{ config.category }}" data-price="{{ config.price }}">
                    <div class="product-card">
                        <div class="product-image">
                            {% if loop.first and config.category == 'budget' %}
                            <div class="product-badge best-seller">Best Value</div>
                            {% elif config.price < 800 %}
                            <div class="product-badge sale">Great Deal</div>
                            {% endif %}
                            <img src="{{ url_for('static', filename='images/Untitled design (2).png') }}" alt="{{ config.name }}">
                        </div>
                        <div class="product-content">
                            <h3 class="product-title">{{ config.name }}</h3>
                            <div class="product-price">£{{ '%0.2f' | format(config.price) }}</div>
                            
                            <div class="monthly-payment">
                                From <span class="payment-amount">£{{ '%0.2f' | format(config.price / 24) }}/month</span>
                            </div>
                            
                            <div class="product-specs">
                                {% if config.cpu_id %}
                                <div class="spec-item">
                                    <div class="spec-icon">
                                        <i class="fas fa-microchip"></i>
                                    </div>
                                    <div class="spec-content">
                                        <div class="spec-title">CPU</div>
                                        <div class="spec-value">{{ config.cpu_id }}</div>
                                    </div>
                                </div>
                                {% endif %}
                                
                                {% if config.gpu_id %}
                                <div class="spec-item">
                                    <div class="spec-icon">
                                        <i class="fas fa-tv"></i>
                                    </div>
                                    <div class="spec-content">
                                        <div class="spec-title">Graphics Card</div>
                                        <div class="spec-value">{{ config.gpu_id }}</div>
                                    </div>
                                </div>
                                {% endif %}
                                
                                {% if config.ram_id %}
                                <div class="spec-item">
                                    <div class="spec-icon">
                                        <i class="fas fa-memory"></i>
                                    </div>
                                    <div class="spec-content">
                                        <div class="spec-title">Memory</div>
                                        <div class="spec-value">{{ config.ram_id }}</div>
                                    </div>
                                </div>
                                {% endif %}
                                
                                {% if config.storage_id %}
                                <div class="spec-item">
                                    <div class="spec-icon">
                                        <i class="fas fa-hdd"></i>
                                    </div>
                                    <div class="spec-content">
                                        <div class="spec-title">Storage</div>
                                        <div class="spec-value">{{ config.storage_id }}</div>
                                    </div>
                                </div>
                                {% endif %}
                            </div>
                            
                            <div class="product-actions">
                                <a href="{{ url_for('product_detail', config_id=config.id) }}" class="btn btn-primary btn-view">View PC</a>
                                <a href="{{ url_for('builds.load_prebuilt', config_id=config.id) }}" class="btn btn-outline-primary btn-buy">Buy</a>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
</section>

<!-- Call to Action -->
<section class="prebuilt-cta">
    <div class="container">
        <h2>Want to Build Your Own Custom PC?</h2>
        <p>Use our PC Builder tool to design a system that's tailored to your exact specifications. Choose every component and create your dream PC.</p>
        <a href="{{ url_for('step_builder') }}" class="btn btn-primary btn-lg">
            <i class="fas fa-wrench me-2"></i>Build Your Own PC
        </a>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Category filter functionality
        const categoryFilter = document.getElementById('category-filter');
        const priceFilter = document.getElementById('price-filter');
        const sortFilter = document.getElementById('sort-filter');
        const productItems = document.querySelectorAll('.product-item');
        
        function filterProducts() {
            const categoryValue = categoryFilter.value;
            const priceValue = priceFilter.value;
            
            productItems.forEach(item => {
                const itemCategory = item.dataset.category;
                const itemPrice = parseFloat(item.dataset.price);
                
                let categoryMatch = true;
                let priceMatch = true;
                
                // Category filtering
                if (categoryValue !== 'all' && itemCategory !== categoryValue) {
                    categoryMatch = false;
                }
                
                // Price filtering
                if (priceValue === 'under-1000' && itemPrice >= 1000) {
                    priceMatch = false;
                } else if (priceValue === '1000-2000' && (itemPrice < 1000 || itemPrice > 2000)) {
                    priceMatch = false;
                } else if (priceValue === 'over-2000' && itemPrice <= 2000) {
                    priceMatch = false;
                }
                
                // Show or hide based on filters
                if (categoryMatch && priceMatch) {
                    item.style.display = '';
                } else {
                    item.style.display = 'none';
                }
            });
            
            // Check if any category sections are empty and hide them
            checkEmptySections();
        }
        
        function sortProducts() {
            const sortValue = sortFilter.value;
            const categories = document.querySelectorAll('.prebuilt-category');
            
            categories.forEach(category => {
                const items = Array.from(category.querySelectorAll('.product-item'));
                const productGrid = category.querySelector('.row');
                
                // Sort items based on selection
                items.sort((a, b) => {
                    const priceA = parseFloat(a.dataset.price);
                    const priceB = parseFloat(b.dataset.price);
                    
                    if (sortValue === 'price-low') {
                        return priceA - priceB;
                    } else if (sortValue === 'price-high') {
                        return priceB - priceA;
                    } else {
                        // For now, other sorts just default to price
                        return priceA - priceB;
                    }
                });
                
                // Re-append sorted items
                items.forEach(item => {
                    productGrid.appendChild(item);
                });
            });
        }
        
        function checkEmptySections() {
            const categories = document.querySelectorAll('.prebuilt-category');
            
            categories.forEach(category => {
                const visibleItems = category.querySelectorAll('.product-item[style=""]').length;
                if (visibleItems === 0) {
                    category.style.display = 'none';
                } else {
                    category.style.display = '';
                }
            });
        }
        
        // Add event listeners to filters
        categoryFilter.addEventListener('change', filterProducts);
        priceFilter.addEventListener('change', filterProducts);
        sortFilter.addEventListener('change', sortProducts);
        
        // Initialize sorting
        sortProducts();
    });
</script>
{% endblock %}